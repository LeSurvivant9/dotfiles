\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{my_model}[2026/01/01 Default]

\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}
\RequirePackage[french]{babel}
\RequirePackage{geometry}
\RequirePackage{graphicx}
\RequirePackage{fancyhdr}
\RequirePackage{lastpage}
\RequirePackage{mathptmx}
\RequirePackage{csquotes}
\RequirePackage{enumitem}
\RequirePackage{titlesec}
\RequirePackage{titletoc}
\RequirePackage{setspace}
\RequirePackage{xcolor}
\RequirePackage{hyperref}

\newcommand{\globaltitle}{}
\newcommand{\globalauthor}{}
\let\oldtitle\title
\let\oldauthor\author
\renewcommand{\title}[1]{\oldtitle{#1}\renewcommand{\globaltitle}{#1}}
\renewcommand{\author}[1]{\oldauthor{#1}\renewcommand{\globalauthor}{#1}}

\AtBeginDocument{\selectlanguage{french}}

\definecolor{lightblue}{RGB}{30, 144, 255}

\hypersetup{
    colorlinks=true,
    linkcolor=black,
    citecolor=black,
    filecolor=black,
    urlcolor=lightblue,
    pdfborder={0 0 0}
}

\DeclareQuoteStyle{french}
  {\textquotedblleft}{\textquotedblright}
  {\textquoteleft}{\textquoteright}
\MakeOuterQuote{"}

\setlist[itemize]{label=\textbullet}

\renewcommand{\thesection}{\Roman{section}}
\renewcommand{\thesubsection}{\thesection.\arabic{subsection}}
\renewcommand{\thesubsubsection}{\thesubsection.\arabic{subsubsection}}

\setstretch{1.1}
\setlength{\parskip}{0.8\baselineskip}
\setlength{\parindent}{0pt}

\geometry{a4paper, top=2.5cm, bottom=2.5cm, left=2.5cm, right=2.5cm, headheight=1.6cm, headsep=1cm}

\titleformat{\section}
  {\normalfont\bfseries\fontsize{16}{19}\selectfont}
  {\thesection}
  {1em}
  {}

\titlespacing*{\section}
  {0pt}
  {0em}
  {0em}

\titleformat{\subsection}
  {\normalfont\bfseries\fontsize{14}{17}\selectfont}
  {\thesubsection}
  {1em}
  {}

\titlespacing*{\subsection}
  {1cm}
  {0em}
  {-1em}

\titleformat{\subsubsection}
  {\normalfont\bfseries\fontsize{10}{12}\selectfont}
  {\thesubsubsection}
  {1em}
  {}

\titlespacing*{\subsubsection}
  {1cm}
  {0pt}
  {-1em}

\titlecontents{section}[0em]
  {\addvspace{0pt}\bfseries}
  {\thecontentslabel\quad}
  {}
  {\titlerule*[0.5pc]{.}\contentspage}

\titlecontents{subsection}[1.5em]
  {\addvspace{-1em}} 
  {\thecontentslabel\quad}
  {}
  {\titlerule*[0.5pc]{.}\contentspage}

\titlecontents{subsubsection}[3.8em]
  {\addvspace{-1em}}
  {\thecontentslabel\quad}
  {}
  {\titlerule*[0.5pc]{.}\contentspage}

\newcommand{\sectionbreak}{\clearpage}

\renewcommand{\maketitle}{
  \begin{titlepage}
    \thispagestyle{fancy}
    \vspace*{\fill}
    \begin{center}
      {\Huge \bfseries \globaltitle \par}
      \vspace{1.5cm}
      {\Large \globalauthor \par}
      \vspace{1cm}
      {\large \today \par}
    \end{center}
    \vspace*{\fill}
  \end{titlepage}
  \setcounter{page}{1}
}

\newcommand{\setupHeaders}{
    \fancyhf{}
    \fancyhead[C]{
        \raisebox{-0.5\height}{\includegraphics[height=1.2cm]{insa-logo}}
        \hspace{2cm}
        \raisebox{-0.5\height}{\includegraphics[height=1.8cm]{uphf-logo}}
    }
    \fancyfoot[L]{Alexandre BOISFER}
    \fancyfoot[C]{Page \thepage\ / \pageref{LastPage}}
    \fancyfoot[R]{\globaltitle}
}

\pagestyle{fancy}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}
\setupHeaders

\fancypagestyle{plain}{
    \renewcommand{\headrulewidth}{0.4pt}
    \renewcommand{\footrulewidth}{0.4pt}
    \setupHeaders
}

\endinput
